<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MwNisH AI - Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body{
  margin:0;
  font-family:'Inter',sans-serif;
  height:100vh;
  display:flex;
  flex-direction:column;
  color:white;
  background:linear-gradient(135deg,#3b1fff,#b900ff);
  overflow:hidden
}
.header{
  padding:20px;
  text-align:center;
  font-size:1.7rem;
  font-weight:700;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(20px);
}
.chat-box{
  flex:1;
  padding:20px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:15px;
}
.msg{
  max-width:80%;
  padding:12px 18px;
  border-radius:14px;
  font-size:1rem;
  line-height:1.4rem;
  animation:fade .2s
}
.user{
  align-self:flex-end;
  background:#fff;
  color:#111
}
.ai{
  align-self:flex-start;
  background:rgba(255,255,255,0.15);
  border:1px solid rgba(255,255,255,0.2)
}
.typing{
  opacity:.6;
  font-style:italic
}
.input-area{
  padding:20px;
  display:flex;
  gap:10px;
  background:rgba(0,0,0,0.2);
  backdrop-filter:blur(20px)
}
input{
  flex:1;
  padding:12px 18px;
  border:none;
  border-radius:30px;
  outline:none
}
button{
  padding:12px 18px;
  border:none;
  border-radius:30px;
  background:#4f46e5;
  color:white;
  font-weight:600;
  cursor:pointer
}
@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>
<body>
<div class="header">MwNisH AI - Premium</div>
<div id="chat" class="chat-box"></div>
<div class="input-area">
<input id="msg" placeholder="Type a message...">
<button onclick="sendMessage()">Send</button>
<button onclick="startMic()">ðŸŽ™</button>
<button onclick="generateImage()">ðŸ–¼</button>
<button onclick="uploadPDF()">ðŸ“„</button>
</div>
<script>
const API = "https://YOUR-WORKER-URL"; // Replace with your Cloudflare Worker URL

function addMsg(text,type){
  const box=document.getElementById('chat');
  const d=document.createElement('div');
  d.className=`msg ${type}`;
  d.innerText=text;
  box.appendChild(d);
  box.scrollTop=box.scrollHeight;
  saveHistory()
}

function typing(){addMsg('Typing...','ai typing')}
function removeTyping(){document.querySelectorAll('.typing').forEach(e=>e.remove())}
function saveHistory(){localStorage.setItem('history',document.getElementById('chat').innerHTML)}
window.onload=()=>{if(localStorage.getItem('history'))document.getElementById('chat').innerHTML=localStorage.getItem('history')}

async function sendMessage(){
  const msg=document.getElementById('msg').value;
  if(!msg) return;
  addMsg(msg,'user');
  document.getElementById('msg').value='';
  typing();
  const r=await fetch(`${API}/chat`,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({message:msg})
  });
  const data=await r.json();
  removeTyping();
  addMsg(data.reply,'ai')
}

function startMic(){
  const rec=new(window.SpeechRecognition||webkitSpeechRecognition)();
  rec.lang='en-US';
  rec.start();
  rec.onresult=e=>{document.getElementById('msg').value=e.results[0][0].transcript}
}

async function generateImage(){
  const prompt=prompt('Enter image description:');
  if(!prompt) return;
  typing();
  const r=await fetch(`${API}/img`,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({prompt})
  });
  const j=await r.json();
  removeTyping();
  addMsg(`Image generated: ${j.url}`,'ai')
}

function uploadPDF(){
  const input=document.createElement('input');
  input.type='file';
  input.accept='.pdf';
  input.onchange=async e=>{
    const file=e.target.files[0];
    typing();
    await fetch(`${API}/pdf`,{method:'POST',body:file});
    removeTyping();
    addMsg('PDF uploaded! AI will process soon.','ai')
  };
  input.click()
}
</script>
</body>
</html>
